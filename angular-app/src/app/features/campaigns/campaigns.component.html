<div class="campaigns-page">
    <app-main-header></app-main-header>

    <div class="container">
        <div class="page-header">
            <h1>Campaigns</h1>
            <p>View all campaigns and track which ones you're actively working on</p>
        </div>

        <!-- Working Campaigns Section -->
        <div class="section" *ngIf="workingCampaigns.length > 0">
            <h2 class="section-title">Active Campaigns ({{ workingCampaigns.length }})</h2>
            <p class="section-subtitle">Your current campaigns and their performance</p>
            <div class="campaigns-grid">
                <p-card *ngFor="let campaign of workingCampaigns" class="campaign-card working">
                    <div class="campaign-header">
                        <h3>{{ campaign.advertiser_name }}</h3>
                        <p-tag [value]="'Active'" [severity]="'success'"></p-tag>
                    </div>

                    <div class="campaign-metrics">
                        <div class="metric">
                            <span class="metric-label">Orders</span>
                            <span class="metric-value">{{ campaign.orders }}</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Sales</span>
                            <span class="metric-value">${{ campaign.sales | trimDecimals }}</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Gross Payout</span>
                            <span class="metric-value">${{ campaign.payout | trimDecimals }}</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Net Payout</span>
                            <span class="metric-value highlight">
                                {{ campaign.net_payout !== null ? ('$' + (campaign.net_payout | trimDecimals)) : '-' }}
                            </span>
                        </div>
                    </div>
                </p-card>
            </div>
        </div>

        <!-- Available Campaigns Section -->
        <div class="section">
            <h2 class="section-title">Available Campaigns ({{ notWorkingCampaigns.length }})</h2>
            <p class="section-subtitle">Request access to promote these campaigns</p>
            <div class="campaigns-grid">
                <p-card *ngFor="let campaign of notWorkingCampaigns" class="campaign-card available">
                    <div class="campaign-header">
                        <h3>{{ campaign.advertiser_name }}</h3>
                        <p-tag [value]="'Available'" [severity]="'secondary'"></p-tag>
                    </div>

                    <div class="campaign-description" *ngIf="campaign.description">
                        <p>{{ campaign.description }}</p>
                    </div>

                    <div class="campaign-rates" *ngIf="formatRate(campaign)">
                        <div class="rates-header">
                            <i class="pi pi-money-bill"></i>
                            <span>Payout Rates</span>
                        </div>
                        <p class="rates-text">{{ formatRate(campaign) }}</p>
                    </div>

                    <div class="campaign-actions">
                        <p-button 
                            label="Request Coupon" 
                            icon="pi pi-send" 
                            (onClick)="requestCoupon(campaign.advertiser_id)"
                            [loading]="requestingCoupon[campaign.advertiser_id]"
                            [disabled]="requestingCoupon[campaign.advertiser_id]"
                            severity="primary">
                        </p-button>
                    </div>
                </p-card>
            </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="!loading && campaigns.length === 0" class="empty-state">
            <i class="pi pi-inbox" style="font-size: 3rem; color: #ccc;"></i>
            <h3>No Campaigns Available</h3>
            <p>There are no campaigns available at the moment.</p>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="loading-state">
            <i class="pi pi-spin pi-spinner" style="font-size: 2rem;"></i>
            <p>Loading campaigns...</p>
        </div>
    </div>

    <app-footer></app-footer>
</div>